{"ast":null,"code":"// import axios from 'axios'\n// const request = axios.create({\n//     baseURL: 'http://192.168.1.90:8080',\n//     timeout: 5000 // 5秒超时时间，无响应直接判断超时\n// })\n// // request.interceptors.request.use(\n// //     function(config){\n// //         return config\n// //     },\n// //     function(error){\n// //         return Promise.reject(error)\n// //     }\n// // )\n// // request.interceptors.response.use(\n// //     function(response){\n// //         return response\n// //     },\n// //     function(error){\n// //         return Promise.reject(error)\n// //     }\n// // )\n// export default request\nimport axios from 'axios';\nimport store from '../store/index'; // axios.defaults.baseURL = 'http://ttapi.research.itcast.cn/' // 接口维护中\n\naxios.defaults.baseURL = 'http://toutiao-app.itheima.net'; // 备用接口\n// axios.defaults.baseURL = 'http://toutiao.itheima.net' // 备用接口\n\naxios.defaults.timeout = 3000;\naxios.interceptors.request.use(function (config) {\n  const {\n    user\n  } = store.state;\n\n  if (user) {\n    config.headers.Authorization = `Bearer ${store.state.user.token}`;\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\nexport default {\n  get: function () {\n    let path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      axios.get(path, {\n        params: data\n      }).then(function (response) {\n        resolve(response.data);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  post: function () {\n    let path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      axios.post(path, data).then(function (response) {\n        resolve(response.data);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  all: function (list) {\n    return new Promise(function (resolve, reject) {\n      axios.all(list).then(axios.spread(function () {\n        for (var _len = arguments.length, result = new Array(_len), _key = 0; _key < _len; _key++) {\n          result[_key] = arguments[_key];\n        }\n\n        resolve(result);\n      })).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  patch: function () {\n    let path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      axios.patch(path, data).then(function (response) {\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  }\n};","map":{"version":3,"names":["axios","store","defaults","baseURL","timeout","interceptors","request","use","config","user","state","headers","Authorization","token","error","Promise","reject","get","path","data","resolve","params","then","response","catch","post","all","list","spread","result","patch"],"sources":["D:/project/技术学习/crm/src/api/request.js"],"sourcesContent":["// import axios from 'axios'\r\n\r\n// const request = axios.create({\r\n//     baseURL: 'http://192.168.1.90:8080',\r\n//     timeout: 5000 // 5秒超时时间，无响应直接判断超时\r\n// })\r\n\r\n// // request.interceptors.request.use(\r\n// //     function(config){\r\n// //         return config\r\n// //     },\r\n// //     function(error){\r\n// //         return Promise.reject(error)\r\n// //     }\r\n// // )\r\n// // request.interceptors.response.use(\r\n// //     function(response){\r\n// //         return response\r\n// //     },\r\n// //     function(error){\r\n// //         return Promise.reject(error)\r\n// //     }\r\n// // )\r\n\r\n\r\n// export default request\r\nimport axios from 'axios'\r\nimport store from '../store/index'\r\n\r\n// axios.defaults.baseURL = 'http://ttapi.research.itcast.cn/' // 接口维护中\r\naxios.defaults.baseURL = 'http://toutiao-app.itheima.net' // 备用接口\r\n// axios.defaults.baseURL = 'http://toutiao.itheima.net' // 备用接口\r\naxios.defaults.timeout = 3000\r\n\r\naxios.interceptors.request.use(\r\n  function (config) {\r\n    const { user } = store.state\r\n    if (user) {\r\n      config.headers.Authorization = `Bearer ${store.state.user.token}`\r\n    }\r\n    return config\r\n  },\r\n  function (error) {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default {\r\n  get: function (path = '', data = {}) {\r\n    return new Promise(function (resolve, reject) {\r\n      axios\r\n        .get(path, { params: data })\r\n        .then(function (response) {\r\n          resolve(response.data)\r\n        })\r\n        .catch(function (error) {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n  post: function (path = '', data = {}) {\r\n    return new Promise(function (resolve, reject) {\r\n      axios\r\n        .post(path, data)\r\n        .then(function (response) {\r\n          resolve(response.data)\r\n        })\r\n        .catch(function (error) {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n  all: function (list) {\r\n    return new Promise(function (resolve, reject) {\r\n      axios\r\n        .all(list)\r\n        .then(\r\n          axios.spread(function (...result) {\r\n            resolve(result)\r\n          })\r\n        )\r\n        .catch(function (error) {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n  patch: function (path = '', data = {}) {\r\n    return new Promise(function (resolve, reject) {\r\n      axios\r\n        .patch(path, data)\r\n        .then(function (response) {\r\n          resolve(response)\r\n        })\r\n        .catch(function (error) {\r\n          reject(error)\r\n        })\r\n    })\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}